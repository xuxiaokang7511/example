(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-efb4e264"],{"0f69":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("content-main",{staticStyle:{"padding-left":"16px","padding-right":"16px","padding-bottom":"10px"},attrs:{"title-height":"48px","show-foot":""},scopedSlots:e._u([{key:"title",fn:function(){return[r("span",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("\u7528\u6237\u5217\u8868")])]},proxy:!0},{key:"right",fn:function(){return[r("el-button",{staticStyle:{"margin-right":"18px"},attrs:{icon:"el-icon-plus",size:"mini"},on:{click:e.userAdd}},[e._v("\u521b\u5efa\u7528\u6237")])]},proxy:!0},{key:"foot",fn:function(){return[r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.page.total/e.page.pageSize>1,expression:"page.total/page.pageSize>1"}],staticStyle:{"padding-left":"16px"},attrs:{total:e.page.total,background:!1,page:e.page.pageNum,limit:e.page.pageSize},on:{"update:page":function(t){return e.$set(e.page,"pageNum",t)},"update:limit":function(t){return e.$set(e.page,"pageSize",t)},pagination:e.getUsers}})]},proxy:!0}])},[e._v(" "),e._v(" "),r("div",{staticStyle:{"padding-left":"16px","padding-right":"16px","margin-top":"5px"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.userList,"header-row-style":{height:"55px"}}},[r("el-table-column",{attrs:{fixed:"",align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"\u7528\u6237\u540d"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.userName,placement:"bottom"}},[r("span",[e._v(e._s(t.row.userName))])])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center",label:"\u804c\u52a1"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center",label:"\u624b\u673a","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.phoneNumber))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","min-width":"165",label:"\u521b\u5efa\u65f6\u95f4"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","min-width":"165",label:"\u66f4\u65b0\u65f6\u95f4"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.updateTime))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"\u7528\u6237\u64cd\u4f5c",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:function(r){return e.resetPwd(t)}}},[e._v("\u91cd\u7f6e\u5bc6\u7801")]),e._v(" "),r("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(r){return e.userEdit(t)}}},[e._v("\u7f16\u8f91")]),e._v(" "),r("el-button",{attrs:{size:"small",icon:t.row.valid?"el-icon-close":"el-icon-check"},on:{click:function(r){return e.userDelete(t)}}},[e._v(e._s(t.row.valid?"\u7981\u7528":"\u542f\u7528"))])]}}])})],1)],1),e._v(" "),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogUserVisible,"before-close":e.closeUser,title:"edit"===e.dialogUserType?"\u7f16\u8f91\u7528\u6237":"\u521b\u5efa\u7528\u6237"},on:{"update:visible":function(t){e.dialogUserVisible=t}}},[r("el-form",{ref:"user",staticStyle:{padding:"10px 16px","max-width":"460px"},attrs:{model:e.user,rules:e.userRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"\u7528\u6237\u540d",prop:"userName",required:""}},[r("el-input",{attrs:{type:"text",placeholder:"\u7528\u6237\u540d"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),r("el-form-item",{staticStyle:{height:"42px"},attrs:{label:"\u89d2\u8272",prop:"roleId",required:""}},[r("el-select",{attrs:{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},model:{value:e.user.roleId,callback:function(t){e.$set(e.user,"roleId",t)},expression:"user.roleId"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"\u804c\u52a1",prop:"title"}},[r("el-input",{attrs:{type:"text",placeholder:"\u7528\u6237\u804c\u52a1"},model:{value:e.user.title,callback:function(t){e.$set(e.user,"title",t)},expression:"user.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"\u624b\u673a\u53f7",prop:"phoneNumber"}},[r("el-input",{attrs:{type:"text",placeholder:"\u624b\u673a\u53f7\u7801"},model:{value:e.user.phoneNumber,callback:function(t){e.$set(e.user,"phoneNumber",t)},expression:"user.phoneNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"\u5bc6\u7801"}},[r("div",[e._v("\n          \u521d\u59cb\u5bc6\u7801:\n          "),r("b",[e._v(e._s(e.defualtPwd))])])]),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{on:{click:e.cancleUser}},[e._v("\u53d6\u6d88")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmUser}},[e._v(e._s("edit"===e.dialogUserType?"\u4fdd\u5b58":"\u786e\u5b9a"))])],1)],1)],1)],1)},n=[],s=r("a34a"),i=r.n(s),l=r("cc2c"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[],c=r("ea28"),p={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&Object(c["a"])(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(c["a"])(0,800)}}},d=p,h=(r("16fb"),r("2877")),g=Object(h["a"])(d,u,o,!1,null,"6d6abcf6",null),f=g.exports;function m(e,t,r,a,n,s,i){try{var l=e[s](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(a,n)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var s=e.apply(t,r);function i(e){m(s,a,n,i,l,"next",e)}function l(e){m(s,a,n,i,l,"throw",e)}i(void 0)}))}}var b={userId:0,userName:"",roleId:null,title:"",phoneNumber:"",valid:!0},w={name:"User",components:{Pagination:f},data:function(){return{listLoading:!0,defualtPwd:"123456",dialogUserVisible:!1,dialogUserType:"new",user:Object.assign({},b),userRules:{userName:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0",trigger:["blur","change"]}],roleId:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272",trigger:["blur","change"]}],title:[{required:!1}],phoneNumber:[{required:!1}]},rolesList:[],userList:[],page:{total:0,pageNum:1,pageSize:10}}},created:function(){this.getRoles(),this.getUsers()},methods:{getRoles:function(){var e=v(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("permission/getRoles");case 3:t=e.sent,this.rolesList=t.data,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),getUsers:function(){var e=v(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.listLoading=!0,e.next=4,this.$store.dispatch("user/getUsers",this.page);case 4:t=e.sent,r=t.data,a=t.page,this.userList=r,this.page=a,this.listLoading=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.listLoading=!1;case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),userAdd:function(){var e=this;this.user=Object.assign({},b),this.dialogUserType="new",this.dialogUserVisible=!0,this.$nextTick((function(){e.$refs["user"].clearValidate()}))},userEdit:function(e){var t=this;this.user=Object(l["a"])(e.row),this.dialogUserType="edit",this.dialogUserVisible=!0,this.$nextTick((function(){t.$refs["user"].clearValidate()}))},userDelete:function(e){var t=this,r=e.row,a=r.valid?"\u7981\u7528":"\u542f\u7528";this.$confirm("\u786e\u8ba4".concat(a,"\u300e").concat(r.userName,"\u300f\u7528\u6237\uff1f"),"Warning",{confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",type:"warning"}).then(v(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("user/updateUser",{userId:r.userId,valid:!r.valid});case 3:a=e.sent,n=a.msg,t.getUsers(),t.$message({type:"success",message:n}),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).catch((function(e){}))},resetPwd:function(e){var t=this,r=e.row;this.$confirm("\u786e\u8ba4\u5c06\u300e".concat(r.userName,"\u300f\u7528\u6237\u7684\u5bc6\u7801\u91cd\u7f6e\u4e3a:").concat(this.defualtPwd,"\uff1f"),"Warning",{confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",type:"warning"}).then(v(i.a.mark((function e(){var a,n,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={userId:r.userId,userName:r.userName,valid:r.valid,pwd:t.defualtPwd},e.next=4,t.$store.dispatch("user/updateUser",a);case 4:n=e.sent,s=n.msg,t.getUsers(),t.$message({type:"success",message:s}),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))).catch((function(e){}))},closeUser:function(e){this.$refs["user"].resetFields(),e()},cancleUser:function(){this.dialogUserVisible=!1,this.$refs["user"].resetFields()},confirmUser:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.submitUser()}))},submitUser:function(){var e=v(i.a.mark((function e(){var t,r,a,n,s,l,u,o;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dialogUserType,r="",e.prev=2,!t){e.next=12;break}return a={userId:this.user.userId,userName:this.user.userName,valid:this.user.valid,roleId:this.user.roleId,title:this.user.title,phoneNumber:this.user.phoneNumber},e.next=7,this.$store.dispatch("user/updateUser",a);case 7:n=e.sent,s=n.msg,r=s,e.next=18;break;case 12:return l={userName:this.user.userName,valid:this.user.valid,roleId:this.user.roleId,pwd:this.defualtPwd,title:this.user.title,phoneNumber:this.user.phoneNumber},e.next=15,this.$store.dispatch("user/addUser",l);case 15:u=e.sent,o=u.msg,r=o;case 18:this.getUsers(),this.cancleUser(),this.$message({message:r,type:"success"}),e.next=25;break;case 23:e.prev=23,e.t0=e["catch"](2);case 25:case"end":return e.stop()}}),e,this,[[2,23]])})));function t(){return e.apply(this,arguments)}return t}()}},x=w,y=Object(h["a"])(x,a,n,!1,null,"66d0b352",null);t["default"]=y.exports},"16fb":function(e,t,r){"use strict";var a=r("6c4f"),n=r.n(a);n.a},"6c4f":function(e,t,r){}}]);